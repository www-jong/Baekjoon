import sys
input=sys.stdin.readline
N,M=map(int,input().split())
li=[list(map(int,input().split())) for i in range(N)]
blocks=[[[0,0],[0,1],[0,2],[0,3]],[[0,0],[1,0],[2,0],[3,0]],
       [[0,0],[0,1],[1,0],[1,1]],
       [[0,0],[1,0],[2,0],[2,1]],[[0,0],[1,0],[2,0],[2,-1]],[[0,0],[0,1],[0,2],[1,0]],[[0,0],[0,1],[0,2],[1,2]],[[0,0],[0,1],[1,0],[2,0]],[[0,0],[0,1],[1,1],[2,1]],[[0,0],[-1,0],[0,1],[0,2]],[[0,0],[0,1],[0,2],[-1,2]],
       [[0,0],[1,0],[1,1],[2,1]],[[0,0],[1,0],[1,-1],[2,-1]],[[0,0],[0,1],[1,0],[1,-1]],[[0,0],[0,1],[1,1],[1,2]],
       [[0,0],[0,1],[0,2],[1,1]],[[0,0],[1,0],[2,0],[1,1]],[[0,0],[1,0],[1,-1],[1,1]],[[0,0],[1,0],[1,-1],[2,0]]]
res=0
for x in range(N):
    for y in range(M):
        for block in blocks:
            tmp=0
            for nx,ny in block:
                sx=x+nx
                sy=y+ny
                if 0<=sx<N and 0<=sy<M:
                    tmp+=li[sx][sy]
                else:
                    break
            res=max(res,tmp)
print(res)

